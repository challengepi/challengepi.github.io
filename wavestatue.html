<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Wave Statue — Cosmic Waves Museum</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0f22" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#0b0f22; --bg-2:#0a0d1b; --txt:#e6ebff; --muted:#9aa4c7; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 800px at 70% -10%, #18204b 0%, var(--bg) 60%), var(--bg-2);color:var(--txt);
         font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;overflow:hidden}
    #scene-wrap{position:fixed;inset:0}
    canvas{touch-action:none}
    /* Pure 3D — no UI */
  </style>
</head>
<body>
  <div id="scene-wrap"></div>
  <script type="module">
    import { OrbitControls } from '/orbit.js';
    import * as THREE from '/three3.js';

    const IS_MOBILE = /Mobi|Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent) || (window.matchMedia && matchMedia('(pointer:coarse)').matches);

    // Renderer
    const wrap = document.getElementById('scene-wrap');
    const renderer = new THREE.WebGLRenderer({ antialias: !IS_MOBILE, alpha: true, powerPreference: 'high-performance' });
    renderer.setSize(innerWidth, innerHeight);
    renderer.setPixelRatio(IS_MOBILE ? Math.min(devicePixelRatio, 1.5) : Math.min(devicePixelRatio, 2));
    renderer.shadowMap.enabled = !IS_MOBILE; renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    wrap.appendChild(renderer.domElement);

    // Scene
    const scene = new THREE.Scene();
    scene.fog = new THREE.Fog(0x060814, 24, 180);

    // Camera & controls
    const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 400);
    camera.position.set(0, 1.6, 8);
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true; controls.dampingFactor = 0.06; controls.maxPolarAngle = Math.PI*0.49;
    controls.target.set(0,1.2,0);

    addEventListener('resize', ()=>{ camera.aspect=innerWidth/innerHeight; camera.updateProjectionMatrix(); renderer.setSize(innerWidth, innerHeight); });

    // Minimal environment (no extra lights)
    const room = new THREE.Mesh(new THREE.BoxGeometry(22, 8, 28), new THREE.MeshStandardMaterial({ color:0x0f1330, roughness:0.9, metalness:0.05, side:THREE.BackSide }));
    scene.add(room);
    const floor = new THREE.Mesh(new THREE.PlaneGeometry(40, 40), new THREE.MeshStandardMaterial({ color:0x0b0f26, roughness:0.2, metalness:0.4 }));
    floor.rotation.x = -Math.PI/2; floor.receiveShadow = !IS_MOBILE; scene.add(floor);

    // Starfield ambiance (unlit)
    const starGeo = new THREE.BufferGeometry();
    const starCount = IS_MOBILE?600:1200; const starPos = new Float32Array(starCount*3);
    for(let i=0;i<starCount;i++){ starPos[i*3+0]=(Math.random()-0.5)*120; starPos[i*3+1]=(Math.random()*40)+2; starPos[i*3+2]=-10 - Math.random()*80; }
    starGeo.setAttribute('position', new THREE.BufferAttribute(starPos,3));
    const stars = new THREE.Points(starGeo, new THREE.PointsMaterial({ size:0.26, color:0xbcd3ff, transparent:true, opacity:0.85 }));
    scene.add(stars);

    // --- Wave Statue + single light source ---
    // Primary sculpture: torus-knot (smooth, flowing "wave")
    const waveGeom = new THREE.TorusKnotGeometry(0.72, 0.24, 300, 40, 2, 3);
    const waveMat = new THREE.MeshStandardMaterial({ color:0x9aaeff, metalness:0.65, roughness:0.25, emissive:0x1a2355, emissiveIntensity:0.28 });
    const wave = new THREE.Mesh(waveGeom, waveMat);
    wave.position.set(0,1.2,0); wave.castShadow = !IS_MOBILE; wave.receiveShadow = !IS_MOBILE;
    scene.add(wave);

    // Accent: faint edge-lines to give a sci‑art vibe (not a light)
    const edges = new THREE.LineSegments(new THREE.EdgesGeometry(waveGeom, 1), new THREE.LineBasicMaterial({ color:0xa7b8ff, transparent:true, opacity:0.14 }));
    edges.position.copy(wave.position); scene.add(edges);

    // Single visible emitter (ONLY light source)
    const emitter = new THREE.Mesh(new THREE.SphereGeometry(0.11, 24, 24), new THREE.MeshStandardMaterial({ color:0xffffff, emissive:0xffffff, emissiveIntensity:1.0 }));
    emitter.position.set(-2.2, 2.3, 1.6);
    scene.add(emitter);

    const light = new THREE.PointLight(0xffffff, 3.0, 22, 2.0);
    light.position.copy(emitter.position);
    light.castShadow = !IS_MOBILE; light.shadow.mapSize.set(1024,1024);
    scene.add(light);

    // Grounding disc (not a light)
    const groundGlow = new THREE.Mesh(new THREE.CircleGeometry(1.3, 64), new THREE.MeshBasicMaterial({ color:0x203058, transparent:true, opacity:0.34 }));
    groundGlow.rotation.x = -Math.PI/2; groundGlow.position.set(0,0.01,0);
    scene.add(groundGlow);

    // Animation
    let t = 0; const clock = new THREE.Clock();
    function animate(){
      const dt = clock.getDelta(); t += dt;
      controls.update();
      stars.rotation.y += 0.02*dt;
      // Sculptural motion: slow spin + subtle "breathing" in emissive
      wave.rotation.y += 0.12*dt; wave.rotation.x += 0.03*dt;
      wave.material.emissiveIntensity = 0.22 + 0.10*Math.sin(t*1.2);
      // Gentle bob for the edge lines to create parallax shimmer
      edges.rotation.copy(wave.rotation);
      renderer.render(scene,camera);
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
